<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Englewood Data Hub Analytics</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Zilla+Slab" rel="stylesheet">

  <!-- CSS Libs -->
  <link rel="stylesheet" href="./lib/css/bootstrap.min.css">
  <link rel="stylesheet" href="./lib/css/leaflet.css">
  <link rel="stylesheet" href="./lib/css/MarkerCluster.css">
  <link rel="stylesheet" href="./lib/css/MarkerCluster.ESS.css">

  <!-- CSS Src -->
  <link rel="stylesheet/less" href="./src/css/englewood-analytics.less">
  <script src="./lib/js/less.min.js"></script>

</head>
<body>
  <div id="browser-compatibility-modal" class="modal fade in">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title row">
            <div class="col-sm-12">
              Browser Incompatibility
            </div>
          </h2>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-12">
              To access this project with full functionality, please use a Chrome or Firefox browser, not your browser <b>(<span id="user-browser">Unsupported Browser</span>)</b>.
            </div>
            <div class="col-md-12">
              <br> Chrome can be downloaded for free from: <a href="https://www.google.com/chrome/browser/">https://www.google.com/chrome/browser/</a>
              <br> Firefox can be downloaded for free from: <a href="https://www.mozilla.org/firefox">https://www.mozilla.org/firefox</a>
            </div>
            <div class="col-md-12">
              <br> You may continue using your current browser to access this project. However, some features may not work correctly
              due to browser incompatibility.
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" id="browserAcceptButton">
            Continue
            <span class="glyphicon glyphicon-log-out"></span>
          </button>
        </div>
      </div>
    </div>
  </div>
  <nav class="navbar navbar-default">
    <div class="container-fluid" id="top-bar">
      <section class="navbar-left">
        <div class="nav dropdown btn-group" id="service-button-group-@new">
          <button class="btn btn-default navbar-btn btn-rounded dropdown-toggle" data-toggle="dropdown">
            <span class="btn-text">Map Markers</span>
            <i class="caret"></i>
          </button>
          <ul class="dropdown-menu dropdown-toggle" role="menu" id="main-marker-dropdown">
            <li class="dropdown-submenu">
              <div class="btn-group row">
                <button class="btn btn-item col-md-10" tabindex="-1">
                  <span class="glyphicon glyphicon-unchecked"></span>
                  Services
                  <i class="map-icon-insert" data-marker="serviceMarker"></i>
                </button>
                <button class="btn btn-item btn-dropdown col-md-2">
                  <div>
                    <i class="caret"></i>
                  </div>
                </button>
                <ul class="dropdown-menu"></ul>
              </div>
            </li>
            <li>School</li>
            <li>Lots</li>
            <li>Crime</li>
          </ul>
        </div>
        <div class="nav btn-group" id="service-button-group">
          <div class="btn-group">
            <button class="btn btn-default dropdown-toggle navbar-btn btn-rounded select-btn" type="button" data-toggle="dropdown">
              <i class="glyphicon glyphicon-map-marker"></i>
              <span class="btn-text">
                Select Services...
              </span>
              <i class="caret"></i>
            </button>
            <ul class="dropdown-menu dropdown-toggle" role="menu" id="service-dropdown"></ul>
          </div>
          <button class="btn btn-default navbar-btn clear-btn">
            <span class="glyphicon glyphicon-remove"></span>
          </button>
        </div>
      
        <div class="nav btn-group" id="census-button-group">
          <div class="btn-group">
            <button class="btn btn-default dropdown-toggle navbar-btn btn-rounded select-btn" type="button" data-toggle="dropdown">
              <span class="btn-text">
                Select Census Category...
              </span>
              <i class="caret"></i>
            </button>
            <ul class="dropdown-menu dropdown-toggle" role="menu" id="census-dropdown"></ul>
          </div>
          <button class="btn btn-default navbar-btn clear-btn">
            <span class="glyphicon glyphicon-remove"></span>
          </button>
        </div>
      
        <div class="nav btn-group" id="marker-view-toggle-group">
          <button class="btn btn-success dropdown-toggle navbar-btn" data-toggle="dropdown">
            <span class="btn-text">
              Toggle Marker Views
            </span>
            <i class="caret"></i>
          </button>
          <ul class="dropdown-menu" role="menu">
            <li>
              <a href="#" id="toggle-marker-view--service">
                <i class="glyphicon glyphicon-unchecked"></i>
                <span>Service Markers</span>
                <i class="map-icon-insert" data-marker="serviceMarker"></i>
              </a>
            </li>
            <li>
              <a href="#" id="toggle-marker-view--lot">
                <i class="glyphicon glyphicon-unchecked"></i>
                <span>Vacant Lot Markers</span>
                <i class="map-icon-insert" data-marker="lotMarker"></i>
              </a>
            </li>
            <li>
              <a href="#" id="toggle-marker-view--school">
                <i class="glyphicon glyphicon-unchecked"></i>
                <span>School Markers</span>
                <i class="map-icon-insert" data-marker="schoolMarker"></i>
              </a>
            </li>
            <li>
              <a href="#" id="toggle-marker-view--crime">
                <i class="glyphicon glyphicon-unchecked"></i>
                <span>Crime Markers</span>
                <i class="map-icon-insert" data-marker="crimeMarker"></i>
              </a>
            </li>
          </ul>
        </div>
      
        <div class="nav btn-group" id="lot-type-view-toggle-group">
          <button class="btn btn-success dropdown-toggle navbar-btn" data-toggle="dropdown">
            <span class="btn-text">
              Toggle Lot Markers
            </span>
            <i class="caret"></i>
          </button>
          <ul class="dropdown-menu" role="menu">
            <li>
              <a href="" id="toggle-lot-marker--residential">
                <i class="glyphicon glyphicon-unchecked"></i>
                <span>Residential Markers</span>
                <i class="map-icon-insert" data-marker="Residential"></i>
              </a>
            </li>
            <li>
              <a href="" id="toggle-lot-marker--bcm">
                <i class="glyphicon glyphicon-unchecked"></i>
                <span>Business/Commercial/Manufacturing Markers</span>
                <i class="map-icon-insert" data-marker="BCM"></i>
              </a>
            </li>
            <li>
              <a href="" id="toggle-lot-marker--pos">
                <i class="glyphicon glyphicon-unchecked"></i>
                <span>Parks and Open Space Markers</span>
                <i class="map-icon-insert" data-marker="POS"></i>
              </a>
            </li>
            <li>
              <a href="" id="toggle-lot-marker--pd">
                <i class="glyphicon glyphicon-unchecked"></i>
                <span>Planned Manufacturing Districts and Development Markers</span>
                <i class="map-icon-insert" data-marker="PD"></i>
              </a>
            </li>
          </ul>
        </div>
      </section>
      <section class="navbar-header">
        <div class="row">
          <div class="col-sm-12">
            <span class="navbar-brand" id="page-title">Englewood Data Hub Analytics</span>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6 text-center">
            <a href="./about-analytics.html">About</a>
          </div>
          <div class="col-sm-6 text-center">
            <a href="./contact.html?type=analytics">Contact</a>
          </div>
        </div>
      </section>
    </div>
  </nav>

  <div class="app-content">
    <div id="service-map">
    </div>
  </div>

  <div id="legend">
    <div class="row" style="margin: 0;">
      <div class="col-md-12" style="padding: 0;">
        <a class="btn btn-info btn-block" id="legend--collapse-btn">
          <b>Collapse Legend</b>
        </a>
      </div>
    </div>
    <div id="legend--collapse-svg-container">

    </div>
  </div>

  <div id="loading-indicator">
    <div class="container">
      <div class="row text-center">
        <div class="spinner"></div>
      </div>
      <div class="row text-center">
        <h2 id="loading-message-title">Loading Data</h2>
      </div>
      <div class="row text-center">
        <h3 id="loading-message-subtitle">Please wait</h3>
      </div>
    </div>
  </div>

  <!-- JS Libs -->
  <script src="./lib/js/jquery.min.js"></script>
  <script src="./lib/js/bootstrap.min.js"></script>
  <script src="./lib/js/d3.v4.min.js"></script>
  <script src="./lib/js/leaflet.js"></script>
  <script src="./lib/js/svg-icon.js"></script>
  <script src="./lib/js/lodash.js"></script>
  <script src="./lib/js/turf.min.js"></script>
  <script src="./lib/js/rbush.min.js"></script>
  <script src="./lib/js/leaflet.markercluster.js"></script>
  <script src="./lib/js/leaflet.featuregroup.subgroup.js"></script>
  <script src="./lib/js/d3-legend.min.js"></script>

  <script src="src/js/models/browserModel.js"></script>
  <script src="src/js/views/browserMessageView.js"></script>
  <script>
    // separate, as consequent scripts may fail to load due to incompatibility
    (() => {
      const browserModel = new BrowserModel();
      const browserMessageView = new BrowserMessageView('#browser-compatibility-modal');
      // console.debug('browser:', browserModel.getBrowser());
      if (!browserModel.isValidBrowser()) {
        browserMessageView.setBrowserName(browserModel.getBrowser());
        browserMessageView.showMessage();
      } else {
        browserMessageView.hideMessage();
      }
    })();
  </script>

  <!-- JS Src -->
  
  <script src="src/js-analytics/models/SocialServiceModel.js"></script>
  <script src="src/js-analytics/models/MapIconModel.js"></script>
  <script src="src/js-analytics/models/ServiceTaxonomyModel.js"></script>
  <script src="src/js-analytics/models/CensusDataModel.js"></script>
  <script src="src/js-analytics/models/SchoolDataModel.js"></script>
  <script src="src/js-analytics/models/LotDataModel.js"></script>
  <script src="src/js-analytics/models/CrimeDataModel.js"></script>

  <script src="./src/js-analytics/views/LoadingMessageView.js"></script>
  <script src="./src/js-analytics/views/MapView.js"></script>
  <script src="./src/js-analytics/views/MultiDropdownView.js"></script>
  <script src="./src/js-analytics/views/ServiceFilterDropdownView.js"></script>
  <script src="./src/js-analytics/views/CensusFilterDropdownView.js"></script>
  <script src="./src/js-analytics/views/LegendView.js"></script>

  <script src="./src/js-analytics/controllers/MarkerViewController.js"></script>
  <script src="./src/js-analytics/controllers/ServiceFilterController.js"></script>
  <script src="./src/js-analytics/controllers/CensusFilterController.js"></script>
  <script src="./src/js-analytics/controllers/SchoolViewController.js"></script>
  <script src="./src/js-analytics/controllers/LotViewController.js"></script>
  <script src="./src/js-analytics/controllers/CrimeViewController.js"></script>
  <script src="./src/js/controllers/dataDownloadController.js"></script>

  <script src="./src/js-analytics/app.js"></script>
</body>
</html>
